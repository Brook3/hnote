# 1. 解决

## 1.1. JSONP
最早的解决方案，利用script标签可以跨域的原理实现，只支持get请求

## 1.2. CORS
同源策略
优势：

    在服务端进行控制是否允许跨域，可自定义规则

    支持各种请求方式

缺点：

    会产生额外的请求

阮一峰对CORS的解析：http://www.ruanyifeng.com/blog/2016/04/cors.html

## 1.3. nginx反向代理
> 详细配置可去查找nginx的反向代理配置

思路是：利用nginx反向代理把跨域为不跨域，支持各种请求方式

缺点：需要在nginx进行额外配置，语义不清晰

## 1.4. 降域
https://www.jianshu.com/p/7666e1ffb8c6

## 1.5. postMessage
同上

## 1.6. 后端解决
### 1.6.1. PHP
在api中添加header头
```php
 // 跨域
header("Access-Control-Allow-Origin: *");
header('Access-Control-Allow-Headers: Origin，X-Requested-With,Content-Type,Accept,Token,Client,Upload');
header("Access-Control-Allow-Methods: *");
header("Access-Control-Allow-Credentials: true");
header("Access-Control-Expose-Headers:true");`
```
多个域名设置方式
```php
$origin = isset($_SERVER['HTTP_ORIGIN'])? $_SERVER['HTTP_ORIGIN'] : '';

$allow_origin = array(
    '[http://api.itbsl.com](http://api.itbsl.com/)',
    '[http://doc.itbsl.com](http://doc.itbsl.com/)'
);

if(in_array($origin, $allow_origin)){
    header('Access-Control-Allow-Origin:'.$origin);
}
```